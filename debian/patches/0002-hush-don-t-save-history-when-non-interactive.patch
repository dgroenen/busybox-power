--- busybox-1.19.2.orig/shell/hush.c
+++ busybox-1.19.2/shell/hush.c
@@ -7831,6 +7831,7 @@ int hush_main(int argc, char **argv)
 			G.line_input_state->hist_file = hp;
 			//set_local_var(xasprintf("HISTFILE=%s", ...));
 		}
+		G.line_input_state->flags &= ~SAVE_HISTORY; /* hush is non-interactive at this point */
 #  if ENABLE_FEATURE_SH_HISTFILESIZE
 		hp = get_local_var_value("HISTFILESIZE");
 		G.line_input_state->max_history = size_from_HISTFILESIZE(hp);
@@ -8052,6 +8053,12 @@ int hush_main(int argc, char **argv)
 	 *    standard output is a terminal
 	 * Refer to Posix.2, the description of the 'sh' utility.
 	 */
+#if ENABLE_FEATURE_EDITING
+# if defined MAX_HISTORY && MAX_HISTORY > 0 && ENABLE_HUSH_SAVEHISTORY
+	G.line_input_state->flags |= SAVE_HISTORY;
+# endif
+#endif
+
 #if ENABLE_HUSH_JOB
 	if (isatty(STDIN_FILENO) && isatty(STDOUT_FILENO)) {
 		G_saved_tty_pgrp = tcgetpgrp(STDIN_FILENO);
